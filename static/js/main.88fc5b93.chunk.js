(this["webpackJsonpswamp-simulator-client"]=this["webpackJsonpswamp-simulator-client"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(12),a=n.n(r),i=(n(11),n(3)),o=(n(18),n(6)),u=n(2),l=n(0);var j=function(){var e=Object(u.f)();return Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:function(){localStorage.clear("user"),e("/"),window.location.reload()},children:"logout"})})};n(20);var h=function(e){var t=e.pet,n=e.handleOnDelete,c=e.currentPet,s=e.setCurrentPet,r=Object(u.f)();return Object(l.jsxs)("div",{className:"petCard",children:[Object(l.jsx)("div",{className:"cardImg",children:Object(l.jsx)("img",{src:t.image_url})}),Object(l.jsxs)("h3",{children:["name: ",t.name]}),Object(l.jsxs)("p",{children:["happiness: ",t.happiness,"%"]}),Object(l.jsx)("button",{onClick:function(){s(t),r("/swamp"),console.log("current pet:",c)},children:"interact"}),Object(l.jsx)("button",{onClick:function(){console.log("deleting..."),console.log(t.id),fetch("https://swamp-simulator.herokuapp.com/pets/".concat(t.id),{method:"DELETE"}),n(t.id)},children:"delete"})]})};var m=function(e){var t=e.userPets,n=e.handleOnDelete,c=e.currentPet,s=e.setCurrentPet;console.log("pets:",t);var r=t.map((function(e){return Object(l.jsx)(h,{pet:e,handleOnDelete:n,currentPet:c,setCurrentPet:s},e.id)}));return Object(l.jsx)("ul",{children:r})};var d=function(e){var t=e.userPets,n=e.handleOnDelete,c=e.currentPet,s=e.setCurrentPet,r=Object(u.f)();return Object(l.jsxs)("div",{children:[Object(l.jsx)(m,{userPets:t,handleOnDelete:n,currentPet:c,setCurrentPet:s}),Object(l.jsx)("button",{onClick:function(){r("adopt")},children:"adopt a gator"}),Object(l.jsx)(j,{})]})},b=n(13),p=n(7),O=n(4);n(21);var g=function(e){var t=e.handleGoBack,n=e.petData,c=e.setPetData,s=e.setUserPets,r=e.userPets;return console.log(n),Object(l.jsxs)("div",{className:"adoptFormFull",children:[Object(l.jsx)("h1",{children:"pick your perfect new pal"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Sending adoption forms"),fetch("https://swamp-simulator.herokuapp.com/pets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return s([].concat(Object(b.a)(r),[e]))})),t()},children:[Object(l.jsx)("input",{type:"text",name:"name",placeholder:"name",s:!0,value:n.name,onChange:function(e){c(Object(O.a)(Object(O.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))}}),Object(l.jsx)("button",{type:"submit",children:"submit"})]}),Object(l.jsxs)("div",{className:"topRow",children:[Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/Bk7DcPp.png"}))},src:"https://i.imgur.com/Bk7DcPp.png"})}),Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/aNB0iGY.png"}))},src:"https://i.imgur.com/aNB0iGY.png"})}),Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/rdCitVE.png"}))},src:"https://i.imgur.com/rdCitVE.png"})})]}),Object(l.jsxs)("div",{className:"middleRow",children:[Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/qKCIhaw.png"}))},src:"https://i.imgur.com/qKCIhaw.png"})}),Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/F8q8wsW.png"}))},src:"https://i.imgur.com/F8q8wsW.png"})}),Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/4C5Zb2a.png"}))},src:"https://i.imgur.com/4C5Zb2a.png"})})]}),Object(l.jsxs)("div",{className:"bottomRow",children:[Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/97mjSWz.png"}))},src:"https://i.imgur.com/97mjSWz.png"})}),Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/yapS10p.png"}))},src:"https://i.imgur.com/yapS10p.png"})}),Object(l.jsx)("div",{className:"adoptFormImg",children:Object(l.jsx)("img",{onClick:function(){return c(Object(O.a)(Object(O.a)({},n),{},{image_url:"https://i.imgur.com/eEL3H2v.png"}))},src:"https://i.imgur.com/eEL3H2v.png"})})]}),Object(l.jsx)("button",{className:"cancelButton",onClick:t,children:"cancel"})]})};var f=function(e){var t=e.setUserPets,n=e.userPets,s=Math.floor(100*Math.random()),r=Math.floor(100*Math.random()),a=Math.floor(100*Math.random()),o=Math.floor(100*Math.random()),j={name:"",health:s,hunger:r,thirst:a,boredom:o,happiness:parseInt((s+r+a+o)/4),image_url:"",user_id:localStorage.getItem("user")},h=Object(c.useState)(j),m=Object(i.a)(h,2),d=m[0],b=m[1];console.log(j);var p=Object(u.f)();return Object(l.jsx)("div",{children:Object(l.jsx)(g,{petData:d,setPetData:b,handleGoBack:function(){p(-1)},setUserPets:t,userPets:n})})};n(22);var x=function(e){var t=e.currentPet,n=(e.start,e.stop,e.fetchSwitch),s=e.setFetchSwitch,r=Object(c.useState)({health:t.health,hunger:t.hunger,thirst:t.thirst,boredom:t.boredom}),a=Object(i.a)(r,2),o=a[0],j=a[1],h=Object(c.useState)(t.happiness),m=Object(i.a)(h,2),d=m[0],b=m[1],g=Object(u.f)();function f(e){console.log("current:",t),o[e]>=95?j(Object(O.a)(Object(O.a)({},o),{},Object(p.a)({},e,100))):j(Object(O.a)(Object(O.a)({},o),{},Object(p.a)({},e,o[e]+5))),b(parseInt((o.health+o.hunger+o.thirst+o.boredom)/4)),console.log("updated:",o),console.log(d)}return Object(c.useEffect)((function(){fetch("https://swamp-simulator.herokuapp.com/pets/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({happiness:d,health:o.health,hunger:o.hunger,thirst:o.thirst,boredom:o.boredom})}).then((function(e){return e.json()})).then((function(e){console.log("posted",e),s(!n)}))}),[d]),Object(l.jsxs)("div",{className:"swampBody",children:[Object(l.jsx)("button",{className:"swampBack",onClick:function(){g(-1),g("home")},children:"back"}),Object(l.jsxs)("div",{className:"interactionBttns",children:[Object(l.jsx)("button",{className:"intBttn",onClick:function(){return f("health")},children:"give medicine"}),Object(l.jsx)("button",{className:"intBttn",onClick:function(){return f("hunger")},children:"give food"}),Object(l.jsx)("button",{className:"intBttn",onClick:function(){return f("thirst")},children:"give water"}),Object(l.jsx)("button",{className:"intBttn",onClick:function(){return f("boredom")},children:"give toys"})]}),Object(l.jsx)("div",{className:"swampName",children:Object(l.jsxs)("h3",{children:["name: ",t.name]})}),Object(l.jsx)("div",{className:"swampImg",children:Object(l.jsx)("img",{c:!0,src:t.image_url})}),Object(l.jsxs)("div",{className:"swampStats",children:[Object(l.jsx)("div",{className:"stat1",children:Object(l.jsxs)("p",{children:["happiness: ",d,"%"]})}),Object(l.jsx)("div",{className:"stat2",children:Object(l.jsxs)("p",{children:["health: ",o.health,"%"]})}),Object(l.jsx)("div",{className:"stat3",children:Object(l.jsxs)("p",{children:["hunger: ",o.hunger,"%"]})}),Object(l.jsx)("div",{className:"stat4",children:Object(l.jsxs)("p",{children:["thirst: ",o.thirst,"%"]})}),Object(l.jsx)("div",{className:"stat5",children:Object(l.jsxs)("p",{children:["boredom: ",o.boredom,"%"]})})]})]})};var v=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)({}),a=Object(i.a)(r,2),o=a[0],j=a[1],h=Object(c.useState)(!1),m=Object(i.a)(h,2),b=m[0],p=m[1],O=Object(c.useState)(0),g=Object(i.a)(O,2),v=g[0],w=g[1],C=localStorage.getItem("user");function S(){if(n.length>0){console.log("current",n);n.map((function(e){var t,n={id:e.id,health:e.health<=0?0:e.health-=1,hunger:e.hunger<=0?0:e.hunger-=1,thirst:e.thirst<=0?0:e.thirst-=1,boredom:e.boredom<=0?0:e.boredom-=1,happiness:e.happiness=parseInt((e.health+e.hunger+e.thirst+e.boredom)/4)};return console.log(n),t=n,console.log("for fetch:",t),void fetch("https://swamp-simulator.herokuapp.com/pets/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({happiness:t.happiness,health:t.health,hunger:t.hunger,thirst:t.thirst,boredom:t.boredom})}).then((function(e){return e.json()})).then((function(e){console.log("posted",e),p(!b)}))}))}}function N(){var e=setInterval(S,15e3);w(e)}function P(){if(v)return clearInterval(v),void w(0)}return Object(c.useEffect)((function(){fetch("https://swamp-simulator.herokuapp.com/users/".concat(C)).then((function(e){return e.json()})).then((function(e){P(),s(e.pets)}))}),[b]),Object(c.useEffect)((function(){P(),N()}),[n]),Object(l.jsx)("div",{children:Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/home",element:Object(l.jsx)(d,{userPets:n,setUserPets:s,handleOnDelete:function(e){var t=n.filter((function(t){return t.id!==e}));s(t)},currentPet:o,setCurrentPet:j,start:N})}),Object(l.jsx)(u.a,{exact:!0,path:"/home/adopt",element:Object(l.jsx)(f,{setUserPets:s,userPets:n})}),Object(l.jsx)(u.a,{path:"/swamp",element:Object(l.jsx)(x,{currentPet:o,fetchSwitch:b,setFetchSwitch:p,stop:P,start:N})})]})})};var w=function(e){var t=e.isSignedUp,n=e.switchMode,s=Object(c.useState)(""),r=Object(i.a)(s,2),a=r[0],o=r[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),h=j[0],m=j[1],d=Object(c.useState)(""),b=Object(i.a)(d,2),p=b[0],O=b[1],g=Object(c.useState)(""),f=Object(i.a)(g,2),x=f[0],v=f[1],w=Object(c.useState)(!1),C=Object(i.a)(w,2),S=C[0],N=C[1],P=Object(c.useState)(!1),k=Object(i.a)(P,2),y=k[0],I=k[1];return Object(l.jsxs)("div",{className:"formContainer",children:[Object(l.jsxs)("form",{className:"LogoutForm",onSubmit:function(e){return function(e){e.preventDefault(),console.log("Creating account..."),fetch("https://swamp-simulator.herokuapp.com/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:h,password:p,password_confirmation:x})}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),localStorage.setItem("user",e.id)})).catch((function(e){return console.log("Error:",e)}))}(e)},children:[Object(l.jsxs)("div",{className:"nonPwInput",children:[Object(l.jsx)("input",{placeholder:"Username",name:"username",type:"text",value:a,onChange:function(e){return o(e.target.value)},required:!0}),Object(l.jsx)("input",{placeholder:"Email",name:"email",type:"email",value:h,onChange:function(e){return m(e.target.value)},required:!0})]}),Object(l.jsx)("input",{placeholder:"Password",name:"password",type:S?"text":"password",value:p,onChange:function(e){return O(e.target.value)},required:!0}),Object(l.jsx)("i",{onClick:function(){N(!S)},children:"view"}),Object(l.jsx)("input",{placeholder:"Password Confirmation",name:"password_confirmation",type:y?"text":"password",value:x,onChange:function(e){return v(e.target.value)},required:!0}),Object(l.jsx)("i",{onClick:function(){I(!y)},children:"view"}),Object(l.jsx)("div",{className:"auth__form-container_fields-content_button",children:Object(l.jsx)("button",{type:"submit",children:"Sign Up"})})]}),Object(l.jsxs)("p",{children:[t?"have an account? ":"need an account? ",Object(l.jsx)("em",{onClick:n,children:t?"sign in":"sign up"})]})]})};n(23);var C=function(e){var t=e.isSignedUp,n=e.switchMode,s=Object(c.useState)(""),r=Object(i.a)(s,2),a=r[0],o=r[1],j=Object(c.useState)(""),h=Object(i.a)(j,2),m=h[0],d=h[1],b=Object(c.useState)(!1),p=Object(i.a)(b,2),O=p[0],g=p[1],f=Object(u.f)();return Object(l.jsxs)("div",{className:"formContainer",children:[Object(l.jsxs)("form",{className:"loginForm",id:"loginForm",onSubmit:function(e){e.preventDefault(),console.log("Signing in..."),fetch("https://swamp-simulator.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:m})}).then((function(e){e.ok?e.json().then((function(e){localStorage.setItem("user",e.id),f("home"),window.location.reload()})):e.json().then((function(e){console.error(e),alert("Invalid Credentials")}))}))},children:[Object(l.jsx)("div",{className:"nonPwInput",children:Object(l.jsx)("input",{className:"username",placeholder:"Username",name:"username",type:"username",value:a,onChange:function(e){return o(e.target.value)},required:!0})}),Object(l.jsx)("input",{className:"password",placeholder:"Password",name:"password",type:O?"text":"password",value:m,onChange:function(e){return d(e.target.value)},required:!0}),Object(l.jsx)("i",{id:"view",onClick:function(){g(!O)},children:"view"}),Object(l.jsx)("div",{className:"auth__form-container_fields-content_button",children:Object(l.jsx)("button",{id:"signInButton",type:"submit",children:"Sign In"})})]}),Object(l.jsxs)("p",{children:[t?"have an account? ":"need an account? ",Object(l.jsx)("em",{onClick:n,children:t?"sign in":"sign up"})]})]})};var S=function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],s=t[1];function r(){s((function(e){return!e}))}return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"header",children:"swamp simulator"}),n?Object(l.jsx)(w,{isSignedUp:n,switchMode:r}):Object(l.jsx)(C,{isSignedUp:n,switchMode:r})]})};var N=function(){var e=Object(c.useState)(!!localStorage.getItem("user")),t=Object(i.a)(e,2),n=t[0];return t[1],!1===n?Object(l.jsx)(o.a,{children:Object(l.jsx)(S,{})}):Object(l.jsx)(o.a,{children:Object(l.jsx)(v,{})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),P()}],[[24,1,2]]]);
//# sourceMappingURL=main.88fc5b93.chunk.js.map